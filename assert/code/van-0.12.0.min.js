let e,t,o,r=Object,l=r.getPrototypeOf,n=document,f=(e,t,o,r)=>(e??(setTimeout(o,r),new Set)).add(t),s={get val(){return this.t},set val(e){let o=this,r=o.t;if(e!==r){o.o===r?t=f(t,o,m):e===o.o&&t.delete(o),o.t=e;for(let t of o.l)t(e,r)}},onnew(e){this.l.push(e)}},a=l(s),d=e=>e.nodeType?e:new Text(e),i=(e,...t)=>{for(let o of t.flat(1/0))e.appendChild(l(o)===s?p(o,e=>e):d(o));return e},u={},_=(t,o)=>t?r.getOwnPropertyDescriptor(t,o)??_(l(t),o):e,g=t=>new Proxy((e,...o)=>{let[f,...d]=l(o[0]??0)===a?o:[{},...o],g=t?n.createElementNS(t,e):n.createElement(e);for(let[t,o]of r.entries(f)){let r=(v=e,w=t,m=l(g),u[v+","+w]??(u[v+","+w]=_(m,w)?.set??0)?e=>g[t]=e:e=>g.setAttribute(t,e));l(o)===s?p(o,e=>(r(e),g)):l(o)===a?p(...o.deps,(...e)=>(r(o.f(...e)),g)):r(o)}var v,w,m;return i(g,...d)},{get:(t,o)=>t.bind(e,o)}),v=e=>e.i=e.i.filter(e=>e.u?.isConnected),w=e=>e.map(e=>l(e??0)===s?e.t:e),m=()=>{let o=[...t];t=e;for(let t of new Set(o.flatMap(v))){let{_:o,u:n}=t,f=t.g(...w(o),n,...(r=o,r.map(e=>l(e??0)===s?e.o:e)));f!==n&&(f!=e?n.replaceWith(t.u=d(f)):(n.remove(),t.u=e))}var r;for(let e of o)e.o=e.t},p=(...t)=>{let r=t.pop(),n=r(...w(t));if(n==e)return[];let a={_:t,u:d(n),g:r};for(let r of t)l(r??0)===s&&(o=f(o,r,()=>(o.forEach(v),o=e),1e3),r.i.push(a));return a.u};export default{add:i,tags:g(),tagsNS:g,state:e=>({__proto__:s,t:e,o:e,i:[],l:[]}),bind:p};